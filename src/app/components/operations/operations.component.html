<div>
  <table>
    <thead>
      <tr>
        <th></th>
        <th>Date</th>
        <th>Montant</th>
        <th>Commentaire</th>
        <th>Remboursable</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let operation of operations; let i = index">
        <tr>
          <td>
            <div class="animation animation-left" [class.lds-ring]="operation.updating['create']"><div></div><div></div><div></div><div></div></div>
            <div class="add" (click)="addNewLine(operation)">+</div>
          </td>
          <td>
            <input
              class="date-input"
              type="date"
              [ngModel]="operation.date"
              (ngModelChange)="updateOperation(operation, 'date', $event)"
            >
            <div class="animation" [class.lds-ring]="operation.updating['date']"><div></div><div></div><div></div><div></div></div>
          </td>
          <td>
            <div class="amount-input">
              <input
                type="number"
                step="0.01"
                [value]="operation.montant"
                (change)="updateOperation(operation, 'montant', eventAsValue($event))"
              > €
            </div>
            <div class="animation" [class.lds-ring]="operation.updating['montant']"><div></div><div></div><div></div><div></div></div>
          </td>
          <td>
            <input
              class="note-input"
              type="text"
              [value]="operation.commentaire"
              (focusout)="updateOperation(operation, 'commentaire', eventAsValue($event))"
              (keyup.enter)="updateOperation(operation, 'commentaire', eventAsValue($event))"
            >
            <div class="animation" [class.lds-ring]="operation.updating['commentaire']"><div></div><div></div><div></div><div></div></div>
          </td>
          <td>
            <input
              class="refund-input"
              type="checkbox"
              [checked]="operation.remboursable === '1'"
              (change)="updateOperation(operation, 'remboursable', getNewRemboursable(operation.remboursable))"
            >
            <div class="animation" [class.lds-ring]="operation.updating['remboursable']"><div></div><div></div><div></div><div></div></div>
          </td>
          <td>
            <div class="delete" (click)="deleteOperation(operation)">❌</div>
            <div class="animation animation-right" [class.lds-ring]="operation.updating['delete']"><div></div><div></div><div></div><div></div></div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
